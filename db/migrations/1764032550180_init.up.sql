CREATE TABLE blog (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    title VARCHAR(255) NOT NULL,
    synopsis TEXT NOT NULL,
    url VARCHAR(255) NOT NULL,
    body TEXT NOT NULL,
    created_at DATE NOT NULL
);

CREATE TABLE tag (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  display_name VARCHAR(32) NOT NULL,
  url VARCHAR(255) NOT NULL
);

CREATE TABLE blog_tag (
  blog_id INTEGER NOT NULL,
  tag_id INTEGER NOT NULL,

  PRIMARY KEY (blog_id, tag_id),
  CONSTRAINT bt_blog_fk FOREIGN KEY (blog_id) REFERENCES blog (id),
  CONSTRAINT bt_tag_fk FOREIGN KEY (tag_id) REFERENCES tag (id)
);
